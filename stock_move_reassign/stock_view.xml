<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_move_picking_tree_add_reassign_btn" model="ir.ui.view">
            <field name="name">stock.move.tree.add_reassign_btn</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_picking_tree"/>
            <field name="arch" type="xml">
                <field name="state" position="after">
                    <button name="%(stock_reassign_action)d" type="action" icon="gtk-execute" string="Reassign stock" states="confirmed"/>
                </field>
            </field>
        </record>

        <record id="view_move_picking_form_add_reassign_btn" model="ir.ui.view">
            <field name="name">stock.move.form.add_reassign_btn</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_picking_form"/>
            <field name="arch" type="xml">
                <button name="force_assign" position="after">
                    <button name="%(stock_reassign_action)d" type="action" string="Reassign stock" states="confirmed"/>
                </button>
            </field>
        </record>



        <record model="ir.ui.view" id="stock_review_unnasigned_moves_tree">
            <field name="name">stock.review.unnasigned.moves.tree</field>
            <field name="model">stock.move</field>
            <field name="priority">151</field>
            <field name="arch" type="xml">
                <tree string="Moves" create="false" delete="false">

                    <field name="product_id" readonly="True"/>
                    <field name="product_uom_qty" readonly="True"/>
                    <field name="product_uom" string="Unit of Measure" readonly="True"/>
                    <field name="product_uos_qty" groups="product.group_uos" readonly="True"/>
                    <field name="product_uos" groups="product.group_uos" readonly="True"/>
                    <field name="location_dest_id" readonly="True"/>
                    <field name="state" readonly="True"/>
                    <field name="incomplete" readonly="True"/>
                    <field name="string_availability_info" readonly="True"/>
                    <button name="%(stock_reassign_action)d" type="action" icon="gtk-execute" string="Reassign stock" states="confirmed"/>



                    <field name="picking_id" string="Reference" readonly="True"/>
                    <field name="origin" readonly="True"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="stock_review_unnasigned_moves_search">
            <field name="name">stock.review.unnasigned.moves.search</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_search"/>
            <field name="arch" type="xml">
                <filter string="Today" position="after">
                    <filter icon="terp-go-today" string="Incomplete" name="incomplete"
                            domain="[('incomplete','=', True)]" help="Moves marked as incomplete, maybe you want to reassign stock"/>
                </filter>

            </field>
        </record>

        <act_window name="Unnasigned Move Reviews"
            res_model="stock.move"
            view_mode="tree,form"
            id="act_review_unnasigned_moves"
            view_id="stock_review_unnasigned_moves_tree"
            context="{'search_default_today':1}"/>

        <menuitem action="act_review_unnasigned_moves" id="menu_review_unnasiged_moves"
                  name="Review Unnasigned Moves" sequence="11" parent="midban_depot_stock.menu_stock_vehicle_route_mgmt"/>

    </data>
</openerp>
