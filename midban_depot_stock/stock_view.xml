<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <record id="view_picking_form_add_operations" model="ir.ui.view">
            <field name="name">stock.picking.form.add.operations</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">

                <!-- Quit class="oe_highlight" -->
                <button name="do_transfer" position="replace">
                    <button name="do_transfer" states="assigned" string="Transfer" groups="stock.group_stock_user" type="object" attrs="{'invisible': ['|', ('pack_operation_exist', '=', True)]}"/>
                </button>

                <!-- Quit class="oe_highlight" -->
                <button name="do_partial_open_barcode" position="replace">
                   <button name="do_partial_open_barcode" string="Enter Transfer Details" groups="stock.group_stock_user" type="object" attrs="{'invisible': ['|',('pack_operation_exist', '=', True),('state','not in',('assigned', 'partially_available'))]}"/>
                </button>

                <!-- Quit class="oe_highlight" -->
                <button name="open_barcode_interface" position="replace">
                    <button name="open_barcode_interface" string="Open Barcode interface" groups="stock.group_stock_user" type="object" attrs="{'invisible': ['|',('pack_operation_exist', '=', False),('state','not in',('assigned', 'partially_available'))]}"/>
                </button>

                <!-- New Buttons to manage stock system without the barcode interface" -->
                <button name="do_transfer" position="after">
                    <button name="prepare_package_type_operations" string="Prepare operations" groups="stock.group_stock_user" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('pack_operation_exist', '=', True), ('state','not in',('assigned', 'partially_available'))]}"/>

                    <button name="approve_pack_operations" string="Approve operations" groups="stock.group_stock_user" type="object" class="oe_highlight"  attrs="{'invisible': ['|', ('pack_operation_exist', '=', False), ('state','not in',('assigned', 'partially_available'))]}"/>
                </button>

                <!-- Show page operations -->
                <page string="Operations Done" position="replace">
                    <page string="Operations">
                            <field name="pack_operation_ids">
                                <tree editable="top">
                                    <field name="location_id"/>
                                    <field name="product_id"/>
                                    <field name="product_uom_id" groups="product.group_uom"/>
                                    <field name="lot_id" domain="[('product_id','=?', product_id)]" context="{'product_id': product_id}" groups="stock.group_production_lot"/>
                                    <field name="package_id" groups="stock.group_tracking_lot"/>
                                    <field name="owner_id" groups="stock.group_tracking_owner"/>
                                    <field name="product_qty" attrs="{'required': [('product_id', '!=', False)]}"/>
                                    <field name="location_dest_id"/>
                                    <field name="result_package_id" groups="stock.group_tracking_lot"/>
                                    <field name="pack_type" groups="stock.group_tracking_lot"/>
                                </tree>
                            </field>
                        </page>
                </page>

                <!-- Add fields from assign_task_wzd.py -->
                <field name="partner_id" position="after">
                    <field name="operator_id"/>
                    <field name="machine_id"/>
                    <field name="warehouse_id"/>
                    <field name="task_type"/>
                    <!-- <field name="reposition"/> -->
                </field>
            </field>
        </record>

        <!-- Only to informative propose right now -->
        <record id="view_quant_package_form_add_type" model="ir.ui.view">
            <field name="name">stock.quant.package.form.add.type</field>
            <field name="model">stock.quant.package</field>
            <field name="inherit_id" ref="stock.view_quant_package_form"/>
            <field name="arch" type="xml">
                <field name="ul_id" position="before">
                    <field name="pack_type"/>
                </field>
            </field>
        </record>

        <!-- Add storage and picking locations to warehouse -->
         <record id="view_warehouse_add_locations" model="ir.ui.view">
            <field name="name">view.warehouse.add.locations</field>
            <field name="model">stock.warehouse</field>
            <field name="inherit_id" ref="stock.view_warehouse"/>
            <field name="arch" type="xml">
                <field name="wh_output_stock_loc_id" position="after">
                    <field name="storage_loc_id"/>
                    <field name="picking_loc_id"/>
                </field>

                <field name="out_type_id" position="after">
                    <field name="ubication_type_id"/>
                    <field name="reposition_type_id"/>
                    <field name="picking_type_id"/>
                </field>
            </field>
        </record>

        <!-- Location View Form -->
        <record id="view_location_form_depot" model="ir.ui.view">
            <field name="name">stock.location.form.depot</field>
            <field name="model">stock.location</field>
            <field name="inherit_id" ref="stock.view_location_form"/>
            <field name="arch" type="xml">
                <!-- <group string="Logistics" position="after">
                    <group string="Information"> -->
                    <field name="posx" position="before">
                       <field name="storage_type"/>
                       <!--  <field name="ref"/> -->
                        <field name="width"/>
                        <field name="length"/>
                        <field name="height"/>
                        <field name="volume"/>
                        <field name="available_volume"/>
                        <!-- <field name="available_height" attrs="{'invisible': [('storage_type','!=', 'mantles')]}"/> -->
                        <!-- <field name="available_height"/>
                        <field name="volume"/> -->
                        <!-- <field name="available_volume" attrs="{'invisible': [('storage_type','!=', 'boxes')]}"/> -->
                        <!-- <field name="available_volume"/> -->
                    </field>
              <!--   </group> -->
            </field>

        </record>
    </data>
</openerp>
