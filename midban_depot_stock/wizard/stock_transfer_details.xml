<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <record id="view_stock_enter_transfer_details_add_buttons" model="ir.ui.view">
            <field name="name">Enter transfer details add buttons</field>
            <field name="model">stock.transfer_details</field>
            <field name="inherit_id" ref="stock.view_stock_enter_transfer_details"/>
            <field name="arch" type="xml">
              <!--   <button name="do_detailed_transfer" position="replace">
                    <field name="midban_operations" invisible="1"/>
                    <field name="picking_type_code" invisible="1"/>
                    <button name="prepare_package_type_operations" string="Prepare operations" groups="stock.group_stock_user" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('midban_operations', '=', True), ('picking_type_code', '!=', 'incoming')]}"/>
                    <button name="do_detailed_transfer" string="_Apply" type="object" attrs="{'invisible': [('midban_operations', '=', True)]}"/>
                </button> -->
                <group string="Products To Move" position="replace">
                    <group string="Products To Move">
                        <div class="oe_grey" groups="stock.group_tracking_lot">
                            Blue lines indicates thar product is configured as variable weight\n
                            That means that the system will not convert between quantitys if the stock unit and
                            purchase unit are not the same.
                        </div>
                        <field name="picking_type_code" invisible="1"/>
                    </group>
                </group>

                 <field name="product_id" position="before">
                    <field name="var_weight" invisible="1"/>
                    <field name="do_onchange" invisible="1"/>
    
                   
                </field>
                <field name="lot_id" position="after">
                    <field name="life_date"/>
                </field>
                 <field name="product_uom_id" position="attributes">
                     <attribute name="readonly">True</attribute>
                </field>
                 <field name="product_uom_id" position="after">
                    <field name="uos_qty"/>
                    <field name="uos_id" readonly="True"/>
                </field>

                <!-- pass picking id to lines in order to get the supplier id to convert between units -->
                <field name="item_ids" position="before">
                    <field name="picking_id" invisible="1"/>
                </field>
                <field name="item_ids" position="attributes">
                    <attribute name="context">{
                        'default_sourceloc_id':picking_source_location_id,
                        'default_destinationloc_id':picking_destination_location_id,
                        'picking_id': picking_id
                    }
                    </attribute>
                </field>

                <group string="Packages To Move" position="attributes">
                    <attribute name="attrs">{'invisible': [('picking_type_code', '=', 'incoming')]}</attribute>
                </group>
                <field name="packop_ids" position="attributes">
                    <attribute name="attrs">{'invisible': [('picking_type_code', '=', 'incoming')]}</attribute>
                </field>
                <tree string="Inventory Details" position="attributes">
                    <attribute name="colors">blue:var_weight == True</attribute>
                </tree>
            </field>
        </record>

        <record id="custom_view_transfer_details" model="ir.ui.view">
            <field name="name">custom_view_transfer_details</field>
            <field name="model">stock.transfer_details</field>
          <!--   <field name="inherit_id" ref="stock.view_stock_enter_transfer_details"/> -->
            <field name="arch" type="xml">
               <form string="Transfer details" version="7">
                    <field name="picking_source_location_id" invisible="True"/>
                    <field name="picking_destination_location_id" invisible="True"/>
                    <field name="midban_operations" invisible="1"/>
                    <field name="picking_type_code" invisible="1"/>
                    <field name="picking_id" invisible="1"/>
                    <group string="Products To Move">
                        <div class="oe_grey" groups="stock.group_tracking_lot">
                            Blue lines indicates thar product is configured as variable weight\n
                            That means that the system will not convert between quantitys if the stock unit and
                            purchase unit are not the same.
                        </div>
                    </group>
                    <group>
                        <field name="item_ids"
                            context="{'default_sourceloc_id':picking_source_location_id,
                                      'default_destinationloc_id':picking_destination_location_id,
                                      'picking_id': picking_id}" nolabel="1">
                            <tree string="Inventory Details" editable="bottom" colors="blue:var_weight == True">
                              <!--   <field name="package_id" groups="stock.group_tracking_lot"/> -->
                                <field name="var_weight" invisible="1"/>
                                <field name="do_onchange" invisible="1"/>
                                <field name="product_id" required="True"  context="{'uom':product_uom_id}" on_change="product_id_change(product_id,product_uom_id,context)"/>
                                <field name="quantity"/>
                                <button name="split_quantities" string="Split" type="object" icon="STOCK_PREFERENCES" attrs="{'invisible': [('quantity', '=', 1)]}"/>
                                <field name="product_uom_id" readonly="True" groups="product.group_uom"/>
                                <field name="uos_qty"  groups="product.group_uom"/>
                                <field name="uos_id"  groups="product.group_uom" readonly="True" context="{'product_id': product_id}"/>
                               <!--  <field name="sourceloc_id" domain="[('id', 'child_of', parent.picking_source_location_id)]"/>
                                <field name="destinationloc_id" domain="[('id', 'child_of', parent.picking_destination_location_id)]"/> -->
                              <!--   <field name="result_package_id" groups="stock.group_tracking_lot" context="{'location_id': destinationloc_id}"/>
                                <button name="put_in_pack" string="Pack" type="object" icon="terp-product" attrs="{'invisible': [('result_package_id', '!=', False)]}" groups="stock.group_tracking_lot"/> -->
                                <field name="lot_id" groups="stock.group_production_lot" domain="[('product_id','=?', product_id)]" context="{'product_id': product_id}"/>
                                <field name="life_date"/>
                            </tree>
                        </field>
                    </group>
                    <!-- <group string="Packages To Move" groups="stock.group_tracking_lot">
                        <div class="oe_grey">
                            The source package will be moved entirely.  If you specify a destination package, the source package will be put in the destination package.  
                        </div>
                    </group> -->
                    <!-- <group groups="stock.group_tracking_lot">
                        <field name="packop_ids" 
                            context="{'default_sourceloc_id':picking_source_location_id,
                                      'default_destinationloc_id':picking_destination_location_id}" nolabel="1">
                            <tree editable="bottom">
                                <field name="package_id" required="True" on_change="source_package_change(package_id)"/>
                                <field name="sourceloc_id" domain="[('id', 'child_of', parent.picking_source_location_id)]"/>
                                <field name="destinationloc_id" domain="[('id', 'child_of', parent.picking_destination_location_id)]"/>
                                <field name="result_package_id"/>
                                <button name="put_in_pack" string="Pack" type="object" icon="terp-product" attrs="{'invisible': [('result_package_id', '!=', False)]}"/>
                            </tree>
                        </field>
                    </group> -->
                    <footer>
                         <button name="prepare_package_type_operations" string="Prepare operations" groups="stock.group_stock_user" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('midban_operations', '=', True), ('picking_type_code', '!=', 'incoming')]}"/>
                       <!--  <button name="do_detailed_transfer" string="_Apply" type="object" class="oe_highlight"/> -->
                        or
                        <button string="_Cancel" class="oe_link" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

    </data>
</openerp>
